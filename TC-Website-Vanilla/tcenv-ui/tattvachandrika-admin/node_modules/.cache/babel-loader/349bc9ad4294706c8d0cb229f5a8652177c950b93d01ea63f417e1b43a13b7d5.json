{"ast":null,"code":"export default {\n  props: {\n    show: Boolean,\n    subscriberId: String,\n    plans: Array\n  },\n  data() {\n    return {\n      form: {\n        subscriber: this.subscriberId,\n        subscription_plan: '',\n        start_date: this.calculateStartDate(),\n        end_date: ''\n      }\n    };\n  },\n  watch: {\n    'form.subscription_plan'(newPlanId) {\n      const selectedPlan = this.plans.find(plan => plan._id === newPlanId);\n      if (selectedPlan) {\n        this.form.end_date = this.calculateEndDate(selectedPlan.duration_in_months);\n      }\n    }\n  },\n  methods: {\n    close() {\n      this.$emit('close');\n    },\n    save() {\n      this.$emit('save', {\n        ...this.form\n      });\n    },\n    calculateStartDate() {\n      const today = new Date();\n      const nextMonth = today.getMonth() === 11 ? 0 : today.getMonth() + 1;\n      const nextYear = nextMonth === 0 ? today.getFullYear() + 1 : today.getFullYear();\n      return new Date(nextYear, nextMonth, 10).toISOString().split('T')[0];\n    },\n    calculateEndDate(durationInMonths) {\n      const startDate = new Date(this.form.start_date);\n      const endYear = startDate.getFullYear() + Math.floor((startDate.getMonth() + durationInMonths) / 12);\n      const endMonth = (startDate.getMonth() + durationInMonths) % 12;\n      const endDate = new Date(endYear, endMonth, 0); // 0 will give the last day of the previous month\n      return endDate.toISOString().split('T')[0];\n    }\n  }\n};","map":{"version":3,"names":["props","show","Boolean","subscriberId","String","plans","Array","data","form","subscriber","subscription_plan","start_date","calculateStartDate","end_date","watch","form.subscription_plan","newPlanId","selectedPlan","find","plan","_id","calculateEndDate","duration_in_months","methods","close","$emit","save","today","Date","nextMonth","getMonth","nextYear","getFullYear","toISOString","split","durationInMonths","startDate","endYear","Math","floor","endMonth","endDate"],"sources":["C:\\Users\\santoshdesai\\Tattvachandrika\\tcenv-ui\\tattvachandrika-admin\\src\\components\\SubscriptionModal.vue"],"sourcesContent":["<template>\r\n  <div class=\"modal fade show\" tabindex=\"-1\" role=\"dialog\" style=\"display: block;\" v-if=\"show\">\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\">Add Subscription</h5>\r\n          <button type=\"button\" class=\"close\" @click=\"close\" aria-label=\"Close\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n          </button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <form @submit.prevent=\"save\">\r\n            <div class=\"form-group\">\r\n              <label for=\"subscription_plan\">Subscription Plan</label>\r\n              <select class=\"form-control\" id=\"subscription_plan\" v-model=\"form.subscription_plan\" required>\r\n                <option v-for=\"plan in plans\" :key=\"plan._id\" :value=\"plan._id\">{{ plan.name }}</option>\r\n              </select>\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"start_date\">Start Date</label>\r\n              <input type=\"date\" class=\"form-control\" id=\"start_date\" v-model=\"form.start_date\" disabled>\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"end_date\">End Date</label>\r\n              <input type=\"date\" class=\"form-control\" id=\"end_date\" v-model=\"form.end_date\" disabled>\r\n            </div>\r\n            <button type=\"submit\" class=\"btn btn-primary\">Add Subscription</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    show: Boolean,\r\n    subscriberId: String,\r\n    plans: Array\r\n  },\r\n  data() {\r\n    return {\r\n      form: {\r\n        subscriber: this.subscriberId,\r\n        subscription_plan: '',\r\n        start_date: this.calculateStartDate(),\r\n        end_date: ''\r\n      }\r\n    };\r\n  },\r\n  watch: {\r\n    'form.subscription_plan'(newPlanId) {\r\n      const selectedPlan = this.plans.find(plan => plan._id === newPlanId);\r\n      if (selectedPlan) {\r\n        this.form.end_date = this.calculateEndDate(selectedPlan.duration_in_months);\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    close() {\r\n      this.$emit('close');\r\n    },\r\n    save() {\r\n      this.$emit('save', { ...this.form });\r\n    },\r\n    calculateStartDate() {\r\n      const today = new Date();\r\n      const nextMonth = today.getMonth() === 11 ? 0 : today.getMonth() + 1;\r\n      const nextYear = nextMonth === 0 ? today.getFullYear() + 1 : today.getFullYear();\r\n      return new Date(nextYear, nextMonth, 10).toISOString().split('T')[0];\r\n    },\r\n    calculateEndDate(durationInMonths) {\r\n      const startDate = new Date(this.form.start_date);\r\n      const endYear = startDate.getFullYear() + Math.floor((startDate.getMonth() + durationInMonths) / 12);\r\n      const endMonth = (startDate.getMonth() + durationInMonths) % 12;\r\n      const endDate = new Date(endYear, endMonth, 0); // 0 will give the last day of the previous month\r\n      return endDate.toISOString().split('T')[0];\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.modal {\r\n  display: block;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n}\r\n</style>\r\n"],"mappings":"AAmCA,eAAe;EACbA,KAAK,EAAE;IACLC,IAAI,EAAEC,OAAO;IACbC,YAAY,EAAEC,MAAM;IACpBC,KAAK,EAAEC;EACT,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,UAAU,EAAE,IAAI,CAACN,YAAY;QAC7BO,iBAAiB,EAAE,EAAE;QACrBC,UAAU,EAAE,IAAI,CAACC,kBAAkB,CAAC,CAAC;QACrCC,QAAQ,EAAE;MACZ;IACF,CAAC;EACH,CAAC;EACDC,KAAK,EAAE;IACL,wBAAwBC,CAACC,SAAS,EAAE;MAClC,MAAMC,YAAW,GAAI,IAAI,CAACZ,KAAK,CAACa,IAAI,CAACC,IAAG,IAAKA,IAAI,CAACC,GAAE,KAAMJ,SAAS,CAAC;MACpE,IAAIC,YAAY,EAAE;QAChB,IAAI,CAACT,IAAI,CAACK,QAAO,GAAI,IAAI,CAACQ,gBAAgB,CAACJ,YAAY,CAACK,kBAAkB,CAAC;MAC7E;IACF;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,KAAKA,CAAA,EAAG;MACN,IAAI,CAACC,KAAK,CAAC,OAAO,CAAC;IACrB,CAAC;IACDC,IAAIA,CAAA,EAAG;MACL,IAAI,CAACD,KAAK,CAAC,MAAM,EAAE;QAAE,GAAG,IAAI,CAACjB;MAAK,CAAC,CAAC;IACtC,CAAC;IACDI,kBAAkBA,CAAA,EAAG;MACnB,MAAMe,KAAI,GAAI,IAAIC,IAAI,CAAC,CAAC;MACxB,MAAMC,SAAQ,GAAIF,KAAK,CAACG,QAAQ,CAAC,MAAM,EAAC,GAAI,IAAIH,KAAK,CAACG,QAAQ,CAAC,IAAI,CAAC;MACpE,MAAMC,QAAO,GAAIF,SAAQ,KAAM,IAAIF,KAAK,CAACK,WAAW,CAAC,IAAI,IAAIL,KAAK,CAACK,WAAW,CAAC,CAAC;MAChF,OAAO,IAAIJ,IAAI,CAACG,QAAQ,EAAEF,SAAS,EAAE,EAAE,CAAC,CAACI,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACtE,CAAC;IACDb,gBAAgBA,CAACc,gBAAgB,EAAE;MACjC,MAAMC,SAAQ,GAAI,IAAIR,IAAI,CAAC,IAAI,CAACpB,IAAI,CAACG,UAAU,CAAC;MAChD,MAAM0B,OAAM,GAAID,SAAS,CAACJ,WAAW,CAAC,IAAIM,IAAI,CAACC,KAAK,CAAC,CAACH,SAAS,CAACN,QAAQ,CAAC,IAAIK,gBAAgB,IAAI,EAAE,CAAC;MACpG,MAAMK,QAAO,GAAI,CAACJ,SAAS,CAACN,QAAQ,CAAC,IAAIK,gBAAgB,IAAI,EAAE;MAC/D,MAAMM,OAAM,GAAI,IAAIb,IAAI,CAACS,OAAO,EAAEG,QAAQ,EAAE,CAAC,CAAC,EAAE;MAChD,OAAOC,OAAO,CAACR,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAC5C;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}